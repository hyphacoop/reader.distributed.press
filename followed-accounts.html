<!DOCTYPE html>
<meta charset="UTF-8" />
<title>Followed Accounts</title>
<style>
  @import url("./index.css");
  @import url("./post.css");
  @import url("./followed-accounts.css");
</style>
<div class="followed-container">
  <p>
    You're following
    <b> <followed-count id="followCount"></followed-count> accounts </b>on the
    fediverse.<br />
    <span
      >To sync your list of followed accounts across multiple devices, be sure
      to ‚¨ÜÔ∏è export your followed list from one device and üì• import it on the
      other.</span
    >
  </p>
  <div class="imp-exp-btn">
    <button id="exportFollowedList">Export</button>
    <button id="importFollowedList">Import</button>
    <input type="file" id="fileInput" style="display: none" accept=".json" />
  </div>
  <followed-actors-list></followed-actors-list>
  <span class="cache-warning-msg"
    >‚ö†Ô∏è Before clearing your browser's cache, ensure you export your followed
    list.</span
  >
</div>
<script>
  document
    .getElementById("exportFollowedList")
    .addEventListener("click", () => {
      window.dispatchEvent(new CustomEvent("exportFollowed"));
    });

  document
    .getElementById("importFollowedList")
    .addEventListener("click", () => {
      document.getElementById("fileInput").click();
    });

  document.getElementById("fileInput").addEventListener("change", function () {
    if (this.files[0]) {
      const event = new CustomEvent("importFollowed", {
        detail: { file: this.files[0] },
      });
      window.dispatchEvent(event);
      this.value = "";
    }
  });
</script>
<script type="module" src="followed-accounts.js"></script>
